<!DOCTYPE html>
<html lang="en">

<div class="siteBG" id="bg1" data-speed="0.2"></div>
<div class="siteBG" id="bg2" data-speed="0.5"></div>
<script src="./javascript/sitescripts/background.js" defer></script>

<head>
    <meta charset="UTF-8">
    <title>The Garchive</title>
    <link rel="icon" href="images/garcon.ico" type="image/x-icon">
    <link rel="stylesheet" href="styles/style_main.css">
</head>

<body>

<div id="immersion-box"></div>

<!--HEADER-->
<header>
        <a href="index.html" class="nogrowlink">
            <img src="images/garcon_archivetext_small.png" alt="Homepage"
                style="width:200px; height:auto; vertical-align: middle;"
                class="imglink">
        </a>
        &nbsp;
        <i>Everything there is to know about this strange specimen!</i>

        <div id="titlebar-box" style="height:50px;">
        <div id="titlebar-container">
        <div id="titlebar-filter"></div>
        <canvas 
            id="titlebar" 
            height="50"

            data-text="THE GARCHIVE | CATEGORY |"
            data-spacing="15"
            data-font-size="36"
            data-y="42"
            data-speed="30"
            data-font-family="Gargling-fried"
            data-color="rgb(97, 143, 69)"
            data-bgcolor="black">
        </canvas>
        </div>
        </div>
</header>

<!--NAVIGATION-->
<br>
<div id="nav"></div>
<br>

<!--PAGE BODY-->
<main id="app">
  <section id="subheader">
    <h1 id="category-title"></h1>
    <p id="category-description"></p>
  </section>
  <div id="category-entries"></div>

  <footer id="footer"></footer>
</main>

<!--SCRIPTS-->
<div>

    <script src="javascript/sitescripts/searchEngine.js"></script>
    <script src="javascript/sitescripts/searchUI.js"></script>
    
    <!--sensitive features access request-->
    <script src="javascript/sitescripts/consent_request.js"></script>

    <script src="javascript/clientside/link_autosave.js" defer></script>
    <script src="javascript/clientside/gamestate.js" defer></script>
    <script src="javascript/pagevisits.js" defer></script>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js" defer></script>
    <script src="javascript/sitescripts/category.js" defer></script>
    <script src="javascript/effects/text_obfuscate.js" defer></script>

    <script src="javascript/sitescripts/titlebar.js"></script>

    <script type="module" src="javascript/auth.js" defer></script>
    <script type="module" src="javascript/sitescripts/accountdisplay.js" defer></script>

        <!--object loader-->
    <script>
    async function loadHTML(id, file) {
      const res = await fetch(file);
      document.getElementById(id).innerHTML = await res.text();
    }
    loadHTML("nav", "objects/navigation.html").then(() => {
      initSearchUI();
    });
    loadHTML("footer", "objects/footer.html").then(() => {
    });
    loadHTML("immersion-box", "objects/immersion.html").then(() => {
      immersionConsent();
    });
    </script>
    
</div>

</body>

</html>